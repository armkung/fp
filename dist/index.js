"use strict";Object.defineProperty(exports, "__esModule", { value: true });var _exportNames = { ifElse: true, when: true, applyTo: true, traverse: true, dropRightWhileWithKey: true, dropWhileWithKey: true, everyWithKey: true, filterWithKey: true, findWithKey: true, findFromWithKey: true, findIndexWithKey: true, findIndexFromWithKey: true, findKeyWithKey: true, findLastWithKey: true, findLastFromWithKey: true, findLastIndexWithKey: true, findLastIndexFromWithKey: true, findLastKeyWithKey: true, flatMapWithKey: true, flatMapDeepWithKey: true, flatMapDepthWithKey: true, forEachWithKey: true, forEachRightWithKey: true, forInWithKey: true, forInRightWithKey: true, forOwnWithKey: true, forOwnRightWithKey: true, mapWithKey: true, mapKeysWithKey: true, mapValuesWithKey: true, partitionWithKey: true, rejectWithKey: true, removeWithKey: true, someWithKey: true, takeRightWhileWithKey: true, takeWhileWithKey: true, timesWithKey: true, pickByWithKey: true, omitByWithKey: true, concatWith: true, containsWith: true, is: true, evolve: true, applySpec: true, append: true, prepend: true, objOf: true, assignOver: true };exports.assignOver = exports.objOf = exports.prepend = exports.append = exports.applySpec = exports.evolve = exports.is = exports.containsWith = exports.concatWith = exports.omitByWithKey = exports.pickByWithKey = exports.timesWithKey = exports.takeWhileWithKey = exports.takeRightWhileWithKey = exports.someWithKey = exports.removeWithKey = exports.rejectWithKey = exports.partitionWithKey = exports.mapValuesWithKey = exports.mapKeysWithKey = exports.mapWithKey = exports.forOwnRightWithKey = exports.forOwnWithKey = exports.forInRightWithKey = exports.forInWithKey = exports.forEachRightWithKey = exports.forEachWithKey = exports.flatMapDepthWithKey = exports.flatMapDeepWithKey = exports.flatMapWithKey = exports.findLastKeyWithKey = exports.findLastIndexFromWithKey = exports.findLastIndexWithKey = exports.findLastFromWithKey = exports.findLastWithKey = exports.findKeyWithKey = exports.findIndexFromWithKey = exports.findIndexWithKey = exports.findFromWithKey = exports.findWithKey = exports.filterWithKey = exports.everyWithKey = exports.dropWhileWithKey = exports.dropRightWhileWithKey = exports.traverse = exports.applyTo = exports.when = exports.ifElse = void 0;

var fp = _interopRequireWildcard(require("lodash/fp"));









































Object.keys(fp).forEach(function (key) {if (key === "default" || key === "__esModule") return;if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;Object.defineProperty(exports, key, { enumerable: true, get: function () {return fp[key];} });});function _interopRequireWildcard(obj) {if (obj && obj.__esModule) {return obj;} else {var newObj = {};if (obj != null) {for (var key in obj) {if (Object.prototype.hasOwnProperty.call(obj, key)) {var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {};if (desc.get || desc.set) {Object.defineProperty(newObj, key, desc);} else {newObj[key] = obj[key];}}}}newObj.default = obj;return newObj;}} /* eslint-disable */ // no curry
const ifElse = (predicate, whenTrueFn, whenFalseFn) => (...args) => predicate(...args) ? whenTrueFn(...args) : whenFalseFn(...args);exports.ifElse = ifElse;const when = (predicate, whenTrueFn) => (...args) => ifElse(predicate, whenTrueFn, fp.identity)(...args);exports.when = when;const applyTo = (...args) => fn => fp.apply(fn)(fp.flatten(args));exports.applyTo = applyTo;const traverse = (transform = fp.identity, fn = (value, path, obj) => fp.set(path, value, obj), initialValue = {}) => {let result;return fp.unary(function reduce(acc, keys = [], isFirstTime = true) {if (isFirstTime) {result = initialValue;}return fp.pipe(when(fp.overSome([fp.isArray, fp.isPlainObject]), fp.pipe(fp.toPairs, fp.map(([key, value]) => {const path = keys.concat(key);const mappedValue = transform(value, path, result, fp.get(key, result));result = fn(mappedValue, path, result, fp.get(key, result));reduce(mappedValue, path, false);}), () => result)), () => result)(acc);});}; // curry
exports.traverse = traverse;const dropRightWhileWithKey = fp.dropRightWhile.convert({ cap: false });exports.dropRightWhileWithKey = dropRightWhileWithKey;
const dropWhileWithKey = fp.dropWhile.convert({ cap: false });exports.dropWhileWithKey = dropWhileWithKey;
const everyWithKey = fp.every.convert({ cap: false });exports.everyWithKey = everyWithKey;
const filterWithKey = fp.filter.convert({ cap: false });exports.filterWithKey = filterWithKey;
const findWithKey = fp.find.convert({ cap: false });exports.findWithKey = findWithKey;
const findFromWithKey = fp.findFrom.convert({ cap: false });exports.findFromWithKey = findFromWithKey;
const findIndexWithKey = fp.findIndex.convert({ cap: false });exports.findIndexWithKey = findIndexWithKey;
const findIndexFromWithKey = fp.findIndexFrom.convert({ cap: false });exports.findIndexFromWithKey = findIndexFromWithKey;
const findKeyWithKey = fp.findKey.convert({ cap: false });exports.findKeyWithKey = findKeyWithKey;
const findLastWithKey = fp.findLast.convert({ cap: false });exports.findLastWithKey = findLastWithKey;
const findLastFromWithKey = fp.findLastFrom.convert({ cap: false });exports.findLastFromWithKey = findLastFromWithKey;
const findLastIndexWithKey = fp.findLastIndex.convert({ cap: false });exports.findLastIndexWithKey = findLastIndexWithKey;
const findLastIndexFromWithKey = fp.findLastIndexFrom.convert({ cap: false });exports.findLastIndexFromWithKey = findLastIndexFromWithKey;
const findLastKeyWithKey = fp.findLastKey.convert({ cap: false });exports.findLastKeyWithKey = findLastKeyWithKey;
const flatMapWithKey = fp.flatMap.convert({ cap: false });exports.flatMapWithKey = flatMapWithKey;
const flatMapDeepWithKey = fp.flatMapDeep.convert({ cap: false });exports.flatMapDeepWithKey = flatMapDeepWithKey;
const flatMapDepthWithKey = fp.flatMapDepth.convert({ cap: false });exports.flatMapDepthWithKey = flatMapDepthWithKey;
const forEachWithKey = fp.forEach.convert({ cap: false });exports.forEachWithKey = forEachWithKey;
const forEachRightWithKey = fp.forEachRight.convert({ cap: false });exports.forEachRightWithKey = forEachRightWithKey;
const forInWithKey = fp.forIn.convert({ cap: false });exports.forInWithKey = forInWithKey;
const forInRightWithKey = fp.forInRight.convert({ cap: false });exports.forInRightWithKey = forInRightWithKey;
const forOwnWithKey = fp.forOwn.convert({ cap: false });exports.forOwnWithKey = forOwnWithKey;
const forOwnRightWithKey = fp.forOwnRight.convert({ cap: false });exports.forOwnRightWithKey = forOwnRightWithKey;
const mapWithKey = fp.map.convert({ cap: false });exports.mapWithKey = mapWithKey;
const mapKeysWithKey = fp.mapKeys.convert({ cap: false });exports.mapKeysWithKey = mapKeysWithKey;
const mapValuesWithKey = fp.mapValues.convert({ cap: false });exports.mapValuesWithKey = mapValuesWithKey;
const partitionWithKey = fp.partition.convert({ cap: false });exports.partitionWithKey = partitionWithKey;
const rejectWithKey = fp.reject.convert({ cap: false });exports.rejectWithKey = rejectWithKey;
const removeWithKey = fp.remove.convert({ cap: false });exports.removeWithKey = removeWithKey;
const someWithKey = fp.some.convert({ cap: false });exports.someWithKey = someWithKey;
const takeRightWhileWithKey = fp.takeRightWhile.convert({ cap: false });exports.takeRightWhileWithKey = takeRightWhileWithKey;
const takeWhileWithKey = fp.takeWhile.convert({ cap: false });exports.takeWhileWithKey = takeWhileWithKey;
const timesWithKey = fp.times.convert({ cap: false });exports.timesWithKey = timesWithKey;
const pickByWithKey = fp.pickBy.convert({ cap: false });exports.pickByWithKey = pickByWithKey;
const omitByWithKey = fp.omitBy.convert({ cap: false });exports.omitByWithKey = omitByWithKey;

const concatWith = fp.concat.convert({ rearg: true });exports.concatWith = concatWith;
const containsWith = fp.contains.convert({ rearg: false });exports.containsWith = containsWith;

const is = fp.curry(
(constructor, value) =>
/* istanbul ignore next */
value != null && value.constructor === constructor || value instanceof constructor);exports.is = is;


const evolve = fp.curry(function evolve(transformations, object) {
  const result = {};
  let transformation;
  let key;
  let type;
  for (key in object) {
    transformation = transformations[key];
    type = typeof transformation;
    /* istanbul ignore next */
    result[key] =
    type === 'function' ?
    transformation(object[key]) :
    transformation && type === 'object' ?
    evolve(transformation, object[key]) :
    object[key];
  }
  return result;
});exports.evolve = evolve;

const applySpec = fp.curry((destObj, srcObj) =>
fp.mapValues(ifElse(fp.isFunction, applyTo(srcObj), fp.identity), destObj));exports.applySpec = applySpec;


const append = fp.curry((elem, list) => fp.concat(list, [elem]));exports.append = append;

const prepend = fp.curry((elem, list) => fp.concat([elem], list));exports.prepend = prepend;

const objOf = fp.curry((key, value) => fp.set(key, value, {}));exports.objOf = objOf;

const assignOver = fp.curry((destObj, srcObj) => {
  const extendedObj = applySpec(destObj, srcObj);

  return fp.assign(srcObj, extendedObj);
});exports.assignOver = assignOver;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJpZkVsc2UiLCJwcmVkaWNhdGUiLCJ3aGVuVHJ1ZUZuIiwid2hlbkZhbHNlRm4iLCJhcmdzIiwid2hlbiIsImZwIiwiaWRlbnRpdHkiLCJhcHBseVRvIiwiZm4iLCJhcHBseSIsImZsYXR0ZW4iLCJ0cmF2ZXJzZSIsInRyYW5zZm9ybSIsInZhbHVlIiwicGF0aCIsIm9iaiIsInNldCIsImluaXRpYWxWYWx1ZSIsInJlc3VsdCIsInVuYXJ5IiwicmVkdWNlIiwiYWNjIiwia2V5cyIsImlzRmlyc3RUaW1lIiwicGlwZSIsIm92ZXJTb21lIiwiaXNBcnJheSIsImlzUGxhaW5PYmplY3QiLCJ0b1BhaXJzIiwibWFwIiwia2V5IiwiY29uY2F0IiwibWFwcGVkVmFsdWUiLCJnZXQiLCJkcm9wUmlnaHRXaGlsZVdpdGhLZXkiLCJkcm9wUmlnaHRXaGlsZSIsImNvbnZlcnQiLCJjYXAiLCJkcm9wV2hpbGVXaXRoS2V5IiwiZHJvcFdoaWxlIiwiZXZlcnlXaXRoS2V5IiwiZXZlcnkiLCJmaWx0ZXJXaXRoS2V5IiwiZmlsdGVyIiwiZmluZFdpdGhLZXkiLCJmaW5kIiwiZmluZEZyb21XaXRoS2V5IiwiZmluZEZyb20iLCJmaW5kSW5kZXhXaXRoS2V5IiwiZmluZEluZGV4IiwiZmluZEluZGV4RnJvbVdpdGhLZXkiLCJmaW5kSW5kZXhGcm9tIiwiZmluZEtleVdpdGhLZXkiLCJmaW5kS2V5IiwiZmluZExhc3RXaXRoS2V5IiwiZmluZExhc3QiLCJmaW5kTGFzdEZyb21XaXRoS2V5IiwiZmluZExhc3RGcm9tIiwiZmluZExhc3RJbmRleFdpdGhLZXkiLCJmaW5kTGFzdEluZGV4IiwiZmluZExhc3RJbmRleEZyb21XaXRoS2V5IiwiZmluZExhc3RJbmRleEZyb20iLCJmaW5kTGFzdEtleVdpdGhLZXkiLCJmaW5kTGFzdEtleSIsImZsYXRNYXBXaXRoS2V5IiwiZmxhdE1hcCIsImZsYXRNYXBEZWVwV2l0aEtleSIsImZsYXRNYXBEZWVwIiwiZmxhdE1hcERlcHRoV2l0aEtleSIsImZsYXRNYXBEZXB0aCIsImZvckVhY2hXaXRoS2V5IiwiZm9yRWFjaCIsImZvckVhY2hSaWdodFdpdGhLZXkiLCJmb3JFYWNoUmlnaHQiLCJmb3JJbldpdGhLZXkiLCJmb3JJbiIsImZvckluUmlnaHRXaXRoS2V5IiwiZm9ySW5SaWdodCIsImZvck93bldpdGhLZXkiLCJmb3JPd24iLCJmb3JPd25SaWdodFdpdGhLZXkiLCJmb3JPd25SaWdodCIsIm1hcFdpdGhLZXkiLCJtYXBLZXlzV2l0aEtleSIsIm1hcEtleXMiLCJtYXBWYWx1ZXNXaXRoS2V5IiwibWFwVmFsdWVzIiwicGFydGl0aW9uV2l0aEtleSIsInBhcnRpdGlvbiIsInJlamVjdFdpdGhLZXkiLCJyZWplY3QiLCJyZW1vdmVXaXRoS2V5IiwicmVtb3ZlIiwic29tZVdpdGhLZXkiLCJzb21lIiwidGFrZVJpZ2h0V2hpbGVXaXRoS2V5IiwidGFrZVJpZ2h0V2hpbGUiLCJ0YWtlV2hpbGVXaXRoS2V5IiwidGFrZVdoaWxlIiwidGltZXNXaXRoS2V5IiwidGltZXMiLCJwaWNrQnlXaXRoS2V5IiwicGlja0J5Iiwib21pdEJ5V2l0aEtleSIsIm9taXRCeSIsImNvbmNhdFdpdGgiLCJyZWFyZyIsImNvbnRhaW5zV2l0aCIsImNvbnRhaW5zIiwiaXMiLCJjdXJyeSIsImNvbnN0cnVjdG9yIiwiZXZvbHZlIiwidHJhbnNmb3JtYXRpb25zIiwib2JqZWN0IiwidHJhbnNmb3JtYXRpb24iLCJ0eXBlIiwiYXBwbHlTcGVjIiwiZGVzdE9iaiIsInNyY09iaiIsImlzRnVuY3Rpb24iLCJhcHBlbmQiLCJlbGVtIiwibGlzdCIsInByZXBlbmQiLCJvYmpPZiIsImFzc2lnbk92ZXIiLCJleHRlbmRlZE9iaiIsImFzc2lnbiJdLCJtYXBwaW5ncyI6Ijs7QUFFQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBMENBLG1RLHFjQTVDQSxvQixDQUlBO0FBQ08sTUFBTUEsTUFBTSxH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QUFFLENBQUN5RyxLQUFILENBQVMsQ0FBQ2hGLEdBQUQsRUFBTWpCLEtBQU4sS0FBZ0JSLEVBQUUsQ0FBQ1csR0FBSCxDQUFPYyxHQUFQLEVBQVlqQixLQUFaLEVBQW1CLEVBQW5CLENBQXpCLENBQWQsQzs7QUFFQSxNQUFNaUgsVUFBVSxHQUFHekgsRUFBRSxDQUFDeUcsS0FBSCxDQUFTLENBQUNRLE9BQUQsRUFBVUMsTUFBVixLQUFxQjtBQUN0RCxRQUFNUSxXQUFXLEdBQUdWLFNBQVMsQ0FBQ0MsT0FBRCxFQUFVQyxNQUFWLENBQTdCOztBQUVBLFNBQU9sSCxFQUFFLENBQUMySCxNQUFILENBQVVULE1BQVYsRUFBa0JRLFdBQWxCLENBQVA7QUFDRCxDQUp5QixDQUFuQixDIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgKi9cblxuaW1wb3J0ICogYXMgZnAgZnJvbSAnbG9kYXNoL2ZwJ1xuXG4vLyBubyBjdXJyeVxuZXhwb3J0IGNvbnN0IGlmRWxzZSA9IChwcmVkaWNhdGUsIHdoZW5UcnVlRm4sIHdoZW5GYWxzZUZuKSA9PiAoLi4uYXJncykgPT5cbiAgcHJlZGljYXRlKC4uLmFyZ3MpID8gd2hlblRydWVGbiguLi5hcmdzKSA6IHdoZW5GYWxzZUZuKC4uLmFyZ3MpXG5cbmV4cG9ydCBjb25zdCB3aGVuID0gKHByZWRpY2F0ZSwgd2hlblRydWVGbikgPT4gKC4uLmFyZ3MpID0+XG4gIGlmRWxzZShwcmVkaWNhdGUsIHdoZW5UcnVlRm4sIGZwLmlkZW50aXR5KSguLi5hcmdzKVxuXG5leHBvcnQgY29uc3QgYXBwbHlUbyA9ICguLi5hcmdzKSA9PiBmbiA9PiBmcC5hcHBseShmbikoZnAuZmxhdHRlbihhcmdzKSlcblxuZXhwb3J0IGNvbnN0IHRyYXZlcnNlID0gKFxuICB0cmFuc2Zvcm0gPSBmcC5pZGVudGl0eSxcbiAgZm4gPSAodmFsdWUsIHBhdGgsIG9iaikgPT4gZnAuc2V0KHBhdGgsIHZhbHVlLCBvYmopLFxuICBpbml0aWFsVmFsdWUgPSB7fVxuKSA9PiB7XG4gIGxldCByZXN1bHRcbiAgcmV0dXJuIGZwLnVuYXJ5KGZ1bmN0aW9uIHJlZHVjZShhY2MsIGtleXMgPSBbXSwgaXNGaXJzdFRpbWUgPSB0cnVlKSB7XG4gICAgaWYgKGlzRmlyc3RUaW1lKSB7XG4gICAgICByZXN1bHQgPSBpbml0aWFsVmFsdWVcbiAgICB9XG4gICAgcmV0dXJuIGZwLnBpcGUoXG4gICAgICB3aGVuKFxuICAgICAgICBmcC5vdmVyU29tZShbZnAuaXNBcnJheSwgZnAuaXNQbGFpbk9iamVjdF0pLFxuICAgICAgICBmcC5waXBlKFxuICAgICAgICAgIGZwLnRvUGFpcnMsXG4gICAgICAgICAgZnAubWFwKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBhdGggPSBrZXlzLmNvbmNhdChrZXkpXG4gICAgICAgICAgICBjb25zdCBtYXBwZWRWYWx1ZSA9IHRyYW5zZm9ybSh2YWx1ZSwgcGF0aCwgcmVzdWx0LCBmcC5nZXQoa2V5LCByZXN1bHQpKVxuICAgICAgICAgICAgcmVzdWx0ID0gZm4obWFwcGVkVmFsdWUsIHBhdGgsIHJlc3VsdCwgZnAuZ2V0KGtleSwgcmVzdWx0KSlcblxuICAgICAgICAgICAgcmVkdWNlKG1hcHBlZFZhbHVlLCBwYXRoLCBmYWxzZSlcbiAgICAgICAgICB9KSxcbiAgICAgICAgICAoKSA9PiByZXN1bHRcbiAgICAgICAgKVxuICAgICAgKSxcbiAgICAgICgpID0+IHJlc3VsdFxuICAgICkoYWNjKVxuICB9KVxufVxuXG4vLyBjdXJyeVxuZXhwb3J0ICogZnJvbSAnbG9kYXNoL2ZwJ1xuXG5leHBvcnQgY29uc3QgZHJvcFJpZ2h0V2hpbGVXaXRoS2V5ID0gZnAuZHJvcFJpZ2h0V2hpbGUuY29udmVydCh7IGNhcDogZmFsc2UgfSlcbmV4cG9ydCBjb25zdCBkcm9wV2hpbGVXaXRoS2V5ID0gZnAuZHJvcFdoaWxlLmNvbnZlcnQoeyBjYXA6IGZhbHNlIH0pXG5leHBvcnQgY29uc3QgZXZlcnlXaXRoS2V5ID0gZnAuZXZlcnkuY29udmVydCh7IGNhcDogZmFsc2UgfSlcbmV4cG9ydCBjb25zdCBmaWx0ZXJXaXRoS2V5ID0gZnAuZmlsdGVyLmNvbnZlcnQoeyBjYXA6IGZhbHNlIH0pXG5leHBvcnQgY29uc3QgZmluZFdpdGhLZXkgPSBmcC5maW5kLmNvbnZlcnQoeyBjYXA6IGZhbHNlIH0pXG5leHBvcnQgY29uc3QgZmluZEZyb21XaXRoS2V5ID0gZnAuZmluZEZyb20uY29udmVydCh7IGNhcDogZmFsc2UgfSlcbmV4cG9ydCBjb25zdCBmaW5kSW5kZXhXaXRoS2V5ID0gZnAuZmluZEluZGV4LmNvbnZlcnQoeyBjYXA6IGZhbHNlIH0pXG5leHBvcnQgY29uc3QgZmluZEluZGV4RnJvbVdpdGhLZXkgPSBmcC5maW5kSW5kZXhGcm9tLmNvbnZlcnQoeyBjYXA6IGZhbHNlIH0pXG5leHBvcnQgY29uc3QgZmluZEtleVdpdGhLZXkgPSBmcC5maW5kS2V5LmNvbnZlcnQoeyBjYXA6IGZhbHNlIH0pXG5leHBvcnQgY29uc3QgZmluZExhc3RXaXRoS2V5ID0gZnAuZmluZExhc3QuY29udmVydCh7IGNhcDogZmFsc2UgfSlcbmV4cG9ydCBjb25zdCBmaW5kTGFzdEZyb21XaXRoS2V5ID0gZnAuZmluZExhc3RGcm9tLmNvbnZlcnQoeyBjYXA6IGZhbHNlIH0pXG5leHBvcnQgY29uc3QgZmluZExhc3RJbmRleFdpdGhLZXkgPSBmcC5maW5kTGFzdEluZGV4LmNvbnZlcnQoeyBjYXA6IGZhbHNlIH0pXG5leHBvcnQgY29uc3QgZmluZExhc3RJbmRleEZyb21XaXRoS2V5ID0gZnAuZmluZExhc3RJbmRleEZyb20uY29udmVydCh7IGNhcDogZmFsc2UgfSlcbmV4cG9ydCBjb25zdCBmaW5kTGFzdEtleVdpdGhLZXkgPSBmcC5maW5kTGFzdEtleS5jb252ZXJ0KHsgY2FwOiBmYWxzZSB9KVxuZXhwb3J0IGNvbnN0IGZsYXRNYXBXaXRoS2V5ID0gZnAuZmxhdE1hcC5jb252ZXJ0KHsgY2FwOiBmYWxzZSB9KVxuZXhwb3J0IGNvbnN0IGZsYXRNYXBEZWVwV2l0aEtleSA9IGZwLmZsYXRNYXBEZWVwLmNvbnZlcnQoeyBjYXA6IGZhbHNlIH0pXG5leHBvcnQgY29uc3QgZmxhdE1hcERlcHRoV2l0aEtleSA9IGZwLmZsYXRNYXBEZXB0aC5jb252ZXJ0KHsgY2FwOiBmYWxzZSB9KVxuZXhwb3J0IGNvbnN0IGZvckVhY2hXaXRoS2V5ID0gZnAuZm9yRWFjaC5jb252ZXJ0KHsgY2FwOiBmYWxzZSB9KVxuZXhwb3J0IGNvbnN0IGZvckVhY2hSaWdodFdpdGhLZXkgPSBmcC5mb3JFYWNoUmlnaHQuY29udmVydCh7IGNhcDogZmFsc2UgfSlcbmV4cG9ydCBjb25zdCBmb3JJbldpdGhLZXkgPSBmcC5mb3JJbi5jb252ZXJ0KHsgY2FwOiBmYWxzZSB9KVxuZXhwb3J0IGNvbnN0IGZvckluUmlnaHRXaXRoS2V5ID0gZnAuZm9ySW5SaWdodC5jb252ZXJ0KHsgY2FwOiBmYWxzZSB9KVxuZXhwb3J0IGNvbnN0IGZvck93bldpdGhLZXkgPSBmcC5mb3JPd24uY29udmVydCh7IGNhcDogZmFsc2UgfSlcbmV4cG9ydCBjb25zdCBmb3JPd25SaWdodFdpdGhLZXkgPSBmcC5mb3JPd25SaWdodC5jb252ZXJ0KHsgY2FwOiBmYWxzZSB9KVxuZXhwb3J0IGNvbnN0IG1hcFdpdGhLZXkgPSBmcC5tYXAuY29udmVydCh7IGNhcDogZmFsc2UgfSlcbmV4cG9ydCBjb25zdCBtYXBLZXlzV2l0aEtleSA9IGZwLm1hcEtleXMuY29udmVydCh7IGNhcDogZmFsc2UgfSlcbmV4cG9ydCBjb25zdCBtYXBWYWx1ZXNXaXRoS2V5ID0gZnAubWFwVmFsdWVzLmNvbnZlcnQoeyBjYXA6IGZhbHNlIH0pXG5leHBvcnQgY29uc3QgcGFydGl0aW9uV2l0aEtleSA9IGZwLnBhcnRpdGlvbi5jb252ZXJ0KHsgY2FwOiBmYWxzZSB9KVxuZXhwb3J0IGNvbnN0IHJlamVjdFdpdGhLZXkgPSBmcC5yZWplY3QuY29udmVydCh7IGNhcDogZmFsc2UgfSlcbmV4cG9ydCBjb25zdCByZW1vdmVXaXRoS2V5ID0gZnAucmVtb3ZlLmNvbnZlcnQoeyBjYXA6IGZhbHNlIH0pXG5leHBvcnQgY29uc3Qgc29tZVdpdGhLZXkgPSBmcC5zb21lLmNvbnZlcnQoeyBjYXA6IGZhbHNlIH0pXG5leHBvcnQgY29uc3QgdGFrZVJpZ2h0V2hpbGVXaXRoS2V5ID0gZnAudGFrZVJpZ2h0V2hpbGUuY29udmVydCh7IGNhcDogZmFsc2UgfSlcbmV4cG9ydCBjb25zdCB0YWtlV2hpbGVXaXRoS2V5ID0gZnAudGFrZVdoaWxlLmNvbnZlcnQoeyBjYXA6IGZhbHNlIH0pXG5leHBvcnQgY29uc3QgdGltZXNXaXRoS2V5ID0gZnAudGltZXMuY29udmVydCh7IGNhcDogZmFsc2UgfSlcbmV4cG9ydCBjb25zdCBwaWNrQnlXaXRoS2V5ID0gZnAucGlja0J5LmNvbnZlcnQoeyBjYXA6IGZhbHNlIH0pXG5leHBvcnQgY29uc3Qgb21pdEJ5V2l0aEtleSA9IGZwLm9taXRCeS5jb252ZXJ0KHsgY2FwOiBmYWxzZSB9KVxuXG5leHBvcnQgY29uc3QgY29uY2F0V2l0aCA9IGZwLmNvbmNhdC5jb252ZXJ0KHsgcmVhcmc6IHRydWUgfSlcbmV4cG9ydCBjb25zdCBjb250YWluc1dpdGggPSBmcC5jb250YWlucy5jb252ZXJ0KHsgcmVhcmc6IGZhbHNlIH0pXG5cbmV4cG9ydCBjb25zdCBpcyA9IGZwLmN1cnJ5KFxuICAoY29uc3RydWN0b3IsIHZhbHVlKSA9PlxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgKHZhbHVlICE9IG51bGwgJiYgdmFsdWUuY29uc3RydWN0b3IgPT09IGNvbnN0cnVjdG9yKSB8fCB2YWx1ZSBpbnN0YW5jZW9mIGNvbnN0cnVjdG9yXG4pXG5cbmV4cG9ydCBjb25zdCBldm9sdmUgPSBmcC5jdXJyeShmdW5jdGlvbiBldm9sdmUodHJhbnNmb3JtYXRpb25zLCBvYmplY3QpIHtcbiAgY29uc3QgcmVzdWx0ID0ge31cbiAgbGV0IHRyYW5zZm9ybWF0aW9uXG4gIGxldCBrZXlcbiAgbGV0IHR5cGVcbiAgZm9yIChrZXkgaW4gb2JqZWN0KSB7XG4gICAgdHJhbnNmb3JtYXRpb24gPSB0cmFuc2Zvcm1hdGlvbnNba2V5XVxuICAgIHR5cGUgPSB0eXBlb2YgdHJhbnNmb3JtYXRpb25cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIHJlc3VsdFtrZXldID1cbiAgICAgIHR5cGUgPT09ICdmdW5jdGlvbidcbiAgICAgICAgPyB0cmFuc2Zvcm1hdGlvbihvYmplY3Rba2V5XSlcbiAgICAgICAgOiB0cmFuc2Zvcm1hdGlvbiAmJiB0eXBlID09PSAnb2JqZWN0J1xuICAgICAgICA/IGV2b2x2ZSh0cmFuc2Zvcm1hdGlvbiwgb2JqZWN0W2tleV0pXG4gICAgICAgIDogb2JqZWN0W2tleV1cbiAgfVxuICByZXR1cm4gcmVzdWx0XG59KVxuXG5leHBvcnQgY29uc3QgYXBwbHlTcGVjID0gZnAuY3VycnkoKGRlc3RPYmosIHNyY09iaikgPT5cbiAgZnAubWFwVmFsdWVzKGlmRWxzZShmcC5pc0Z1bmN0aW9uLCBhcHBseVRvKHNyY09iaiksIGZwLmlkZW50aXR5KSwgZGVzdE9iailcbilcblxuZXhwb3J0IGNvbnN0IGFwcGVuZCA9IGZwLmN1cnJ5KChlbGVtLCBsaXN0KSA9PiBmcC5jb25jYXQobGlzdCwgW2VsZW1dKSlcblxuZXhwb3J0IGNvbnN0IHByZXBlbmQgPSBmcC5jdXJyeSgoZWxlbSwgbGlzdCkgPT4gZnAuY29uY2F0KFtlbGVtXSwgbGlzdCkpXG5cbmV4cG9ydCBjb25zdCBvYmpPZiA9IGZwLmN1cnJ5KChrZXksIHZhbHVlKSA9PiBmcC5zZXQoa2V5LCB2YWx1ZSwge30pKVxuXG5leHBvcnQgY29uc3QgYXNzaWduT3ZlciA9IGZwLmN1cnJ5KChkZXN0T2JqLCBzcmNPYmopID0+IHtcbiAgY29uc3QgZXh0ZW5kZWRPYmogPSBhcHBseVNwZWMoZGVzdE9iaiwgc3JjT2JqKVxuXG4gIHJldHVybiBmcC5hc3NpZ24oc3JjT2JqLCBleHRlbmRlZE9iailcbn0pXG4iXX0=